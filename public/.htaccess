<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews -Indexes
    </IfModule>

    RewriteEngine On

    # Handle Authorization Header
    RewriteCond %{HTTP:Authorization} .
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

    # Redirect Trailing Slashes If Not A Folder...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} (.+)/$
    RewriteRule ^ %1 [L,R=301]

    # Send Requests To Front Controller...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
    </IfModule>


<IfModule mod_headers.c>
    Header set Age "216000"
    Header set X-XSS-Protection "1; mode=block"
    Header set X-Frame-Options SAMEORIGIN 
    Header set X-Content-Type-Options "nosniff"
    Header set X-Permitted-Cross-Domain-Policies "none" 
    
    Header set Strict-Transport-Security "max-age=10368000; includeSubDomains; preload"
    Header set Referrer-Policy "no-referrer-when-downgrade"
    Header set Feature-Policy "accelerometer 'none'; ambient-light-sensor 'self'; autoplay 'self'; camera 'none'; cookie 'self'; docwrite 'self'; domain 'self'; encrypted-media 'self'; fullscreen 'self'; geolocation 'none'; gyroscope 'none'; magnetometer 'none'; microphone 'none'; midi 'none'; payment 'self'; picture-in-picture 'self'; speaker 'self'; sync-script 'self'; sync-xhr 'self'; unsized-media 'self'; usb 'none'; vertical-scroll 'self'; vibrate 'none'; vr 'none'"
    Header set Permissions-Policy "accelerometer=Origin(), autoplay=(), camera=(), gyroscope=(), magnetometer=(), microphone=(), payment=(), publickey-credentials-get=(), usb=()"
    Header always unset X-Powered-By
    Header always unset Server
    Header unset X-Powered-By
    Header unset Server
    Header append Vary "Accept-Encoding, User-Agent, Referer"
    Header unset Cache-Control
    Header unset Pragma
    Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
    Header set Pragma "no-cache"

    Header set Content-Security-Policy "default-src 'self'; object-src 'none'; base-uri 'self'; frame-src 'self' https://www.youtube.com/; script-src 'self' https://www.googletagmanager.com https://www.google-analytics.com/ https://www.google.com/ https://www.gstatic.com/  ; style-src https://fonts.googleapis.com/ 'self' 'unsafe-inline' 'unsafe-eval'; font-src 'self' https://fonts.gstatic.com/ data:; "  




</IfModule>


<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access 1 year"
    ExpiresByType image/jpeg "access 1 year"
    ExpiresByType image/gif "access 1 year"
    ExpiresByType image/png "access 1 year"
    ExpiresByType image/webp "access 1 year"
    ExpiresByType image/svg+xml "access 1 year"
    ExpiresByType image/x-icon "access 1 year"
    ExpiresByType font/woff "access 1 year"
    ExpiresByType font/woff2 "access 1 year"
    ExpiresByType application/x-font-ttf "access 7 days"
    ExpiresByType application/x-font-truetype "access 7 days"
    ExpiresByType application/x-font-opentype "access 7 days"
    ExpiresByType application/x-font-woff "access 7 days"
    ExpiresByType application/font-woff2 "access 7 days"
    ExpiresByType application/vnd.ms-fontobject "access 7 days"
    ExpiresByType application/font-sfnt "access 7 days"
    ExpiresByType application/x-shockwave-flash "access 7 days" 
    ExpiresByType application/javascript "access 7 days"  
    ExpiresByType application/x-javascript "access 7 days" 
    ExpiresByType application/xhtml+xml "access 7 days"  
    ExpiresByType application/pdf "access 1 month"
    ExpiresByType text/css "access 1 year"  
    ExpiresByType text/javascript "access 7 days"    
    ExpiresByType text/html "access 7 days"
    ExpiresDefault "access plus 1 year"
</IfModule>

<IfModule mod_headers.c>
    <FilesMatch "\.(bmp|css|flv|gif|ico|jpg|jpeg|js|pdf|png|svg|swf|tif|tiff)$">
        Header set Last-Modified "Mon, 10 April 2023 00:00:00 GMT"
    </FilesMatch>
</IfModule>

<IfModule mod_security.c>
  SecFilterEngine On
  SecFilterScanPOST Off
</IfModule>

<ifModule mod_gzip.c>
    mod_gzip_on Yes
    mod_gzip_dechunk Yes
    mod_gzip_item_include file .(html?|txt|css|js|php|pl)$
    mod_gzip_item_include handler ^cgi-script$
    mod_gzip_item_include mime ^text/.*
    mod_gzip_item_include mime ^application/x-javascript.*
    mod_gzip_item_exclude mime ^image/.*
    mod_gzip_item_exclude rspheader ^Content-Encoding:.gzip.
</ifModule>

<IfModule pagespeed_module>
    ModPagespeed On
</IfModule>

<FilesMatch ".env|.ftpquota|.gitattributes|.gitignore|access\.log|artisan|BingSiteAuth\.xml|composer\.json|composer\.lock|error\.log|package\.json|phpunit\.xml|readme\.md|robots\.txt|sitemap\.xml|web\.config">
  Order allow,deny
  Deny from all
</FilesMatch>